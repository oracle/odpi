<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Message Properties Functions &#8212; ODPI-C v2.0.0-beta.3</title>
    
    <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="ODPI-C v2.0.0-beta.3" href="../index.html" />
    <link rel="up" title="Public Functions" href="index.html" />
    <link rel="next" title="Object Functions" href="dpiObject.html" />
    <link rel="prev" title="LOB Functions" href="dpiLob.html" /> 
  </head>
  <body role="document">
<div class="header">
<a href="https://oracle.github.io/odpi/doc">Doc Home</a>
</div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
             <div class="section" id="message-properties-functions">
<span id="dpimsgpropsfunctions"></span><h1>Message Properties Functions<a class="headerlink" href="#message-properties-functions" title="Permalink to this headline">¶</a></h1>
<p>Message properties handles are used to represent the properties of messages
that are enqueued and dequeued using advanced queuing. They are created by
calling the function <a class="reference internal" href="dpiConn.html#c.dpiConn_newMsgProps" title="dpiConn_newMsgProps"><code class="xref c c-func docutils literal"><span class="pre">dpiConn_newMsgProps()</span></code></a> and are destroyed by
releasing the last reference by calling the function
<a class="reference internal" href="#c.dpiMsgProps_release" title="dpiMsgProps_release"><code class="xref c c-func docutils literal"><span class="pre">dpiMsgProps_release()</span></code></a>.</p>
<dl class="function">
<dt id="c.dpiMsgProps_addRef">
int <code class="descname">dpiMsgProps_addRef</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_addRef" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a reference to the message properties. This is intended for situations
where a reference to the message properties needs to be maintained
independently of the reference returned when the handle was created.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- the message properties to which a reference is to be added. If
the reference is NULL or invalid an error is returned.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_getNumAttempts">
int <code class="descname">dpiMsgProps_getNumAttempts</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, int32_t<em>&nbsp;*value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_getNumAttempts" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of attempts that have been made to dequeue a message.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties from which the number of
attempts is to be retrieved. If the reference is NULL or invalid an error
is returned.</p>
<p><strong>value</strong> -- a pointer to the value, which will be populated upon
successful completion of this function.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_getCorrelation">
int <code class="descname">dpiMsgProps_getCorrelation</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, const char **<em>&nbsp;value</em>, uint32_t<em>&nbsp;*valueLength</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_getCorrelation" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the correlation supplied by the producer when the message was
enqueued.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties from which the
correlation is to be retrieved. If the reference is NULL or invalid an
error is returned.</p>
<p><strong>value</strong> -- a pointer to the value, as a byte string in the encoding used
for CHAR data, which will be populated upon successful completion of this
function. If there is no correlation, the pointer will be populated with
the value NULL.</p>
<p><strong>valueLength</strong> -- a pointer to the length of the value, in bytes, which
will be populated upon successful completion of this function. If there is
no correlation, the pointer will be populated with the value 0.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_getDelay">
int <code class="descname">dpiMsgProps_getDelay</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, int32_t<em>&nbsp;*value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_getDelay" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of seconds the enqueued message will be delayed.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties from which the delay
is to be retrieved. If the reference is NULL or invalid an error is
returned.</p>
<p><strong>value</strong> -- a pointer to the value, which will be populated upon
successful completion of this function.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_getDeliveryMode">
int <code class="descname">dpiMsgProps_getDeliveryMode</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, dpiMessageDeliveryMode<em>&nbsp;*value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_getDeliveryMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the mode that was used to deliver the message.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties from which the message
delivery mode is to be retrieved. If the reference is NULL or invalid an
error is returned.</p>
<p><strong>value</strong> -- a pointer to the value, which will be populated upon
successful completion of this function. It will be one of the values from
the enumeration <a class="reference internal" href="../public_enums/dpiMessageDeliveryMode.html#dpimessagedeliverymode"><span class="std std-ref">dpiMessageDeliveryMode</span></a>.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_getEnqTime">
int <code class="descname">dpiMsgProps_getEnqTime</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, dpiTimestamp<em>&nbsp;*value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_getEnqTime" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the time that the message was enqueued.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties from which the enqueue
time is to be retrieved. If the reference is NULL or invalid an error is
returned.</p>
<p><strong>value</strong> -- a pointer to a <a class="reference internal" href="../public_structs/dpiTimestamp.html#dpitimestamp"><span class="std std-ref">dpiTimestamp</span></a> structure, which will be
populated upon successful completion of this function.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_getExceptionQ">
int <code class="descname">dpiMsgProps_getExceptionQ</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, const char **<em>&nbsp;value</em>, uint32_t<em>&nbsp;*valueLength</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_getExceptionQ" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of the queue to which the message is moved if it cannot be
processed successfully. See function <a class="reference internal" href="#c.dpiMsgProps_setExceptionQ" title="dpiMsgProps_setExceptionQ"><code class="xref c c-func docutils literal"><span class="pre">dpiMsgProps_setExceptionQ()</span></code></a>
for more information.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties from which the name of
the exception queue is to be retrieved. If the reference is NULL or invalid
an error is returned.</p>
<p><strong>value</strong> -- a pointer to the value, as a byte string in the encoding used
for CHAR data, which will be populated upon successful completion of this
function. If there is no exception queue name, the pointer will be
populated with the value NULL.</p>
<p><strong>valueLength</strong> -- a pointer to the length of the value, in bytes, which
will be populated upon successful completion of this function. If there is
no exception queue name, the pointer will be populated with the value 0.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_getExpiration">
int <code class="descname">dpiMsgProps_getExpiration</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, int32_t<em>&nbsp;*value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_getExpiration" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of seconds the message is available to be dequeued.
See function <a class="reference internal" href="#c.dpiMsgProps_setExpiration" title="dpiMsgProps_setExpiration"><code class="xref c c-func docutils literal"><span class="pre">dpiMsgProps_setExpiration()</span></code></a> for more information.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties from which the
expiration is to be retrieved. If the reference is NULL or invalid an error
is returned.</p>
<p><strong>value</strong> -- a pointer to the value, which will be populated upon
successful completion of this function.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_getOriginalMsgId">
int <code class="descname">dpiMsgProps_getOriginalMsgId</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, const char **<em>&nbsp;value</em>, uint32_t<em>&nbsp;*valueLength</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_getOriginalMsgId" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the id of the message in the last queue that generated this
message. See function <a class="reference internal" href="#c.dpiMsgProps_setOriginalMsgId" title="dpiMsgProps_setOriginalMsgId"><code class="xref c c-func docutils literal"><span class="pre">dpiMsgProps_setOriginalMsgId()</span></code></a> for more
information.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties from which the original
message id is to be retrieved. If the reference is NULL or invalid an error
is returned.</p>
<p><strong>value</strong> -- a pointer to the value, as a byte string in the encoding used
for CHAR data, which will be populated upon successful completion of this
function. If there is no original message id, the pointer will be populated
with the value NULL.</p>
<p><strong>valueLength</strong> -- a pointer to the length of the value, in bytes, which
will be populated upon successful completion of this function. If there is
no original message id, the pointer will be populated with the value 0.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_getPriority">
int <code class="descname">dpiMsgProps_getPriority</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, int32_t<em>&nbsp;*value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_getPriority" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the priority assigned to the message. See function
<a class="reference internal" href="#c.dpiMsgProps_setPriority" title="dpiMsgProps_setPriority"><code class="xref c c-func docutils literal"><span class="pre">dpiMsgProps_setPriority()</span></code></a> for more information.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties from which the priority
is to be retrieved. If the reference is NULL or invalid an error is
returned.</p>
<p><strong>value</strong> -- a pointer to the value, which will be populated upon
successful completion of this function.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_getState">
int <code class="descname">dpiMsgProps_getState</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, dpiMessageState<em>&nbsp;*value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_getState" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the state of the message at the time of dequeue.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties from which the message
state is to be retrieved. If the reference is NULL or invalid an error is
returned.</p>
<p><strong>value</strong> -- a pointer to the value, which will be populated upon
successful completion of this function. It will be one of the values from
the enumeration <a class="reference internal" href="../public_enums/dpiMessageState.html#dpimessagestate"><span class="std std-ref">dpiMessageState</span></a>.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_release">
int <code class="descname">dpiMsgProps_release</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_release" title="Permalink to this definition">¶</a></dt>
<dd><p>Releases a reference to the message properties. A count of the references
to the message properties is maintained and when this count reaches zero,
the memory associated with the properties is freed.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- the message properties from which a reference is to be
released. If the reference is NULL or invalid an error is returned.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_setCorrelation">
int <code class="descname">dpiMsgProps_setCorrelation</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, const char *<em>&nbsp;value</em>, uint32_t<em>&nbsp;valueLength</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_setCorrelation" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the correlation of the message to be dequeued. Special pattern
matching characters such as the percent sign (%) and the underscore (_)
can be used. If multiple messages satisfy the pattern, the order of
dequeuing is undetermined.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties on which the correlation
is to be set. If the reference is NULL or invalid an error is returned.</p>
<p><strong>value</strong> -- a byte string in the encoding used for CHAR data, or NULL if
the correlation is to be cleared.</p>
<p><strong>valueLength</strong> -- the length of the value parameter in bytes, or 0 if
the value parameter is NULL.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_setDelay">
int <code class="descname">dpiMsgProps_setDelay</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, int32_t<em>&nbsp;value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_setDelay" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the number of seconds to delay the message before it can be dequeued.
Messages enqueued with a delay are put into the DPI_MSG_STATE_WAITING
state. When the delay expires the message is put into the
DPI_MSG_STATE_READY state. Dequeuing directly by message id overrides this
delay specification. Note that delay processing requires the queue monitor
to be started.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties on which the delay is to
be set. If the reference is NULL or invalid an error is returned.</p>
<p><strong>value</strong> -- the value to set.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_setExceptionQ">
int <code class="descname">dpiMsgProps_setExceptionQ</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, const char *<em>&nbsp;value</em>, uint32_t<em>&nbsp;valueLength</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_setExceptionQ" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the name of the queue to which the message is moved if it cannot be
processed successfully. Messages are moved if the number of unsuccessful
dequeue attempts has reached the maximum allowed number or if the message
has expired. All messages in the exception queue are in the
DPI_MSG_STATE_EXPIRED state.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties on which the name of the
exception queue is to be set. If the reference is NULL or invalid an error
is returned.</p>
<p><strong>value</strong> -- a byte string in the encoding used for CHAR data, or NULL if
the exception queue name is to be cleared. If not NULL, the value must
refer to a valid queue name.</p>
<p><strong>valueLength</strong> -- the length of the value parameter in bytes, or 0 if
the value parameter is NULL.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_setExpiration">
int <code class="descname">dpiMsgProps_setExpiration</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, int32_t<em>&nbsp;value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_setExpiration" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the number of seconds the message is available to be dequeued. This
value is an offset from the delay. Expiration processing requires the queue
monitor to be running. Until this time elapses, the messages are in the
queue in the state DPI_MSG_STATE_READY. After this time elapses messages
are moved to the exception queue in the DPI_MSG_STATE_EXPIRED state.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties on which the expiration
is to be set. If the reference is NULL or invalid an error is returned.</p>
<p><strong>value</strong> -- the value to set.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_setOriginalMsgId">
int <code class="descname">dpiMsgProps_setOriginalMsgId</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, const char *<em>&nbsp;value</em>, uint32_t<em>&nbsp;valueLength</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_setOriginalMsgId" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the id of the message in the last queue that generated this
message.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties on which the original
message identifier is to be set. If the reference is NULL or invalid an
error is returned.</p>
<p><strong>value</strong> -- a pointer to the bytes making up the message identifier, or
NULL if no identifier is to be specified.</p>
<p><strong>valueLength</strong> -- the length of the value parameter in bytes, or 0 if
the value parameter is NULL.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiMsgProps_setPriority">
int <code class="descname">dpiMsgProps_setPriority</code><span class="sig-paren">(</span>dpiMsgProps<em>&nbsp;*props</em>, int32_t<em>&nbsp;value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiMsgProps_setPriority" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the priority assigned to the message. A smaller number indicates a
higher priority. The priority can be any number, including negative
numbers.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>props</strong> -- a reference to the message properties on which the priority is
to be set. If the reference is NULL or invalid an error is returned.</p>
<p><strong>value</strong> -- the value to set.</p>
</dd></dl>

</div>
 
          </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
      &#169; Copyright 2016, 2017 Oracle and/or its affiliates.  All rights reserved.
    </div>
  </body>
</html>
