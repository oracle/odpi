<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Pool Functions &#8212; ODPI-C v2.0.0-beta.4</title>
    
    <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="ODPI-C v2.0.0-beta.4" href="../index.html" />
    <link rel="up" title="Public Functions" href="index.html" />
    <link rel="next" title="Rowid Functions" href="dpiRowid.html" />
    <link rel="prev" title="Object Type Functions" href="dpiObjectType.html" /> 
  </head>
  <body role="document">
<div class="header">
<a href="https://oracle.github.io/odpi/doc">Doc Home</a>
</div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
             <div class="section" id="pool-functions">
<span id="dpipoolfunctions"></span><h1>Pool Functions<a class="headerlink" href="#pool-functions" title="Permalink to this headline">¶</a></h1>
<p>Pool handles are used to represent session pools. They are created using the
function <a class="reference internal" href="#c.dpiPool_create" title="dpiPool_create"><code class="xref c c-func docutils literal"><span class="pre">dpiPool_create()</span></code></a> and can be closed by calling the function
<a class="reference internal" href="#c.dpiPool_close" title="dpiPool_close"><code class="xref c c-func docutils literal"><span class="pre">dpiPool_close()</span></code></a> or releasing the last reference to the pool by
calling the function <a class="reference internal" href="#c.dpiPool_release" title="dpiPool_release"><code class="xref c c-func docutils literal"><span class="pre">dpiPool_release()</span></code></a>. Pools can be used to create
connections by calling the function <a class="reference internal" href="#c.dpiPool_acquireConnection" title="dpiPool_acquireConnection"><code class="xref c c-func docutils literal"><span class="pre">dpiPool_acquireConnection()</span></code></a>.</p>
<dl class="function">
<dt id="c.dpiPool_acquireConnection">
int <code class="descname">dpiPool_acquireConnection</code><span class="sig-paren">(</span>dpiPool<em>&nbsp;*pool</em>, const char<em>&nbsp;*userName</em>, uint32_t<em>&nbsp;userNameLength</em>, const char<em>&nbsp;*password</em>, uint32_t<em>&nbsp;passwordLength</em>, dpiConnCreateParams<em>&nbsp;*params</em>, dpiConn<em>&nbsp;**conn</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_acquireConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquires a connection from the pool and returns a reference to it. This
reference should be released as soon as it is no longer needed.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>pool</strong> -- the pool from which a connection is to be acquired. If the
reference is NULL or invalid an error is returned.</p>
<p><strong>userName</strong> -- the name of the user used for authenticating the user, as
a byte string in the encoding used for CHAR data. NULL is also acceptable
if external authentication is being requested or credentials were supplied
when the pool was created.</p>
<p><strong>userNameLength</strong> -- the length of the userName parameter, in bytes, or
0 if the userName parameter is NULL.</p>
<p><strong>password</strong> -- the password to use for authenticating the user, as a byte
string in the encoding used for CHAR data. NULL is also acceptable if
external authentication is being requested or if credentials were supplied
when the pool was created.</p>
<p><strong>passwordLength</strong> -- the length of the password parameter, in bytes, or
0 if the password parameter is NULL.</p>
<p><strong>params</strong> -- a pointer to a <a class="reference internal" href="../public_structs/dpiConnCreateParams.html#dpiconncreateparams"><span class="std std-ref">dpiConnCreateParams</span></a> structure which
is used to specify parameters for connection creation. NULL is also
acceptable in which case all default parameters will be used when creating
the connection.</p>
<p><strong>conn</strong> -- a reference to the connection that is acquired from the pool.
This value is populated upon successful completion of this function.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiPool_addRef">
int <code class="descname">dpiPool_addRef</code><span class="sig-paren">(</span>dpiPool<em>&nbsp;*pool</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_addRef" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a reference to the pool. This is intended for situations where a
reference to the pool needs to be maintained independently of the reference
returned when the pool was created.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>pool</strong> -- the pool to which a reference is to be added. If the reference
is NULL or invalid an error is returned.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiPool_close">
int <code class="descname">dpiPool_close</code><span class="sig-paren">(</span>dpiPool<em>&nbsp;*pool</em>, dpiPoolCloseMode<em>&nbsp;closeMode</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes the pool and makes it unusable for further activity.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>pool</strong> -- a reference to the pool which is to be closed. If the reference
is NULL or invalid an error is returned.</p>
<p><strong>closeMode</strong> -- one or more of the values from the enumeration
<a class="reference internal" href="../public_enums/dpiPoolCloseMode.html#dpipoolclosemode"><span class="std std-ref">dpiPoolCloseMode</span></a>, OR'ed together.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiPool_create">
int <code class="descname">dpiPool_create</code><span class="sig-paren">(</span>const dpiContext<em>&nbsp;*context</em>, const char<em>&nbsp;*userName</em>, uint32_t<em>&nbsp;userNameLength</em>, const char<em>&nbsp;*password</em>, uint32_t<em>&nbsp;passwordLength</em>, const char<em>&nbsp;*connectString</em>, uint32_t<em>&nbsp;connectStringLength</em>, dpiCommonCreateParams<em>&nbsp;*commonParams</em>, dpiPoolCreateParams<em>&nbsp;*createParams</em>, dpiPool<em>&nbsp;**pool</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a session pool which creates and maintains a group of stateless
sessions to the database. The main benefit of session pooling is
performance since making a connection to the database is a time-consuming
activity, especially when the database is remote.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.
If a failure occurs, the errorInfo structure is filled in with error
information.</p>
<p><strong>context</strong> -- the context handle created earlier using the function
<a class="reference internal" href="dpiContext.html#c.dpiContext_create" title="dpiContext_create"><code class="xref c c-func docutils literal"><span class="pre">dpiContext_create()</span></code></a>. If the handle is NULL or invalid an error is
returned.</p>
<p><strong>userName</strong> -- the name of the user used for authenticating sessions, as
a byte string in the encoding used for CHAR data. NULL is also acceptable
if external authentication is being requested or if a heterogeneous pool is
being created.</p>
<p><strong>userNameLength</strong> -- the length of the userName parameter, in bytes, or
0 if the userName parameter is NULL.</p>
<p><strong>password</strong> -- the password to use for authenticating sessions, as a byte
string in the encoding used for CHAR data. NULL is also acceptable if
external authentication is being requested or if a heterogeneous pool is
being created.</p>
<p><strong>passwordLength</strong> -- the length of the password parameter, in bytes, or
0 if the password parameter is NULL.</p>
<p><strong>connectString</strong> -- the connect string identifying the database to which
connections are to be established by the session pool, as a byte string
in the encoding used for CHAR data. NULL is also acceptable for local
connections (identified by the environment variable ORACLE_SID).</p>
<p><strong>connectStringLength</strong> -- the length of the connectString parameter, in
bytes, or 0 if the connectString parameter is NULL.</p>
<p><strong>commonParams</strong> -- a pointer to a <a class="reference internal" href="../public_structs/dpiCommonCreateParams.html#dpicommoncreateparams"><span class="std std-ref">dpiCommonCreateParams</span></a> structure
which is used to specify context parameters for pool creation. NULL is also
acceptable in which case all default parameters will be used when creating
the pool.</p>
<p><strong>createParams</strong> -- a pointer to a <a class="reference internal" href="../public_structs/dpiPoolCreateParams.html#dpipoolcreateparams"><span class="std std-ref">dpiPoolCreateParams</span></a> structure
which is used to specify parameters for pool creation. NULL is also
acceptable in which case all default parameters will be used for pool
creation.</p>
<p><strong>pool</strong> -- a reference to the pool that is created. This value will be
NULL if the creation of the pool structure was completely unsuccessful but
otherwise will contain a valid handle, even if an error is returned. If a
value is returned, a call to <a class="reference internal" href="#c.dpiPool_release" title="dpiPool_release"><code class="xref c c-func docutils literal"><span class="pre">dpiPool_release()</span></code></a> must be made in
order to release the reference.</p>
<p><strong>errorInfo</strong> -- a pointer to a <a class="reference internal" href="../public_structs/dpiErrorInfo.html#dpierrorinfo"><span class="std std-ref">dpiErrorInfo</span></a> structure which will be
populated with error information if an error takes place during the
execution of this function. If no error takes place, the structure is not
modified in any way.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiPool_getBusyCount">
int <code class="descname">dpiPool_getBusyCount</code><span class="sig-paren">(</span>dpiPool<em>&nbsp;*pool</em>, uint32_t<em>&nbsp;*value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_getBusyCount" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of sessions in the pool that are busy.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>pool</strong> -- a reference to the pool from which the number of busy sessions
is to be retrieved. If the reference is NULL or invalid an error is
returned.</p>
<p><strong>value</strong> -- a pointer to the value which will be populated upon successful
completion of this function.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiPool_getEncodingInfo">
int <code class="descname">dpiPool_getEncodingInfo</code><span class="sig-paren">(</span>dpiPool<em>&nbsp;*pool</em>, dpiEncodingInfo<em>&nbsp;*info</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_getEncodingInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the encoding information used by the pool. This will be equivalent
to the values passed when the pool was created, or the values retrieved
from the environment variables NLS_LANG and NLS_NCHAR.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>pool</strong> -- a reference to the pool whose encoding information is to
be retrieved. If the reference is NULL or invalid an error is returned.</p>
<p><strong>info</strong> -- a pointer to a <a class="reference internal" href="../public_structs/dpiEncodingInfo.html#dpiencodinginfo"><span class="std std-ref">dpiEncodingInfo</span></a> structure which will be
populated with the encoding information used by the pool.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiPool_getGetMode">
int <code class="descname">dpiPool_getGetMode</code><span class="sig-paren">(</span>dpiPool<em>&nbsp;*pool</em>, dpiPoolGetMode<em>&nbsp;*value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_getGetMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the mode used for acquiring or getting connections from the pool.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>pool</strong> -- a reference to the pool from which the mode used for
acquiring connections is to be retrieved. If the reference is NULL or
invalid an error is returned.</p>
<p><strong>value</strong> -- a pointer to the value which will be populated upon successful
completion of this function.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiPool_getMaxLifetimeSession">
int <code class="descname">dpiPool_getMaxLifetimeSession</code><span class="sig-paren">(</span>dpiPool<em>&nbsp;*pool</em>, uint32_t<em>&nbsp;*value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_getMaxLifetimeSession" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the maximum lifetime of all sessions in the pool, in seconds.
Sessions in the pool are terminated when this value has been reached, but
only when another session is released back to the pool.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>pool</strong> -- a reference to the pool from which the maximum lifetime of
sessions is to be retrieved. If the reference is NULL or invalid an error
is returned.</p>
<p><strong>value</strong> -- a pointer to the value which will be populated upon successful
completion of this function.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiPool_getOpenCount">
int <code class="descname">dpiPool_getOpenCount</code><span class="sig-paren">(</span>dpiPool<em>&nbsp;*pool</em>, uint32_t<em>&nbsp;*value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_getOpenCount" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of sessions in the pool that are open.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>pool</strong> -- a reference to the pool from which the number of open sessions
is to be retrieved. If the reference is NULL or invalid an error is
returned.</p>
<p><strong>value</strong> -- a pointer to the value which will be populated upon successful
completion of this function.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiPool_getStmtCacheSize">
int <code class="descname">dpiPool_getStmtCacheSize</code><span class="sig-paren">(</span>dpiPool<em>&nbsp;*pool</em>, uint32_t<em>&nbsp;*cacheSize</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_getStmtCacheSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the default size of the statement cache for sessions in the pool,
in number of statements.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>pool</strong> -- a reference to the pool from which the default size of the
statement cache is to be retrieved. If the reference is NULL or invalid an
error is returned.</p>
<p><strong>cacheSize</strong> -- a pointer to the default size of the statement cache,
which will be populated upon successful completion of this function.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiPool_getTimeout">
int <code class="descname">dpiPool_getTimeout</code><span class="sig-paren">(</span>dpiPool<em>&nbsp;*pool</em>, uint32_t<em>&nbsp;*value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_getTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the amount of time, in seconds, after which idle sessions in the
pool are terminated, but only when another session is released back to the
pool.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>pool</strong> -- a reference to the pool from which the timeout for idle
sessions is to be retrieved. If the reference is NULL or invalid an error
is returned.</p>
<p><strong>value</strong> -- a pointer to the value which will be populated upon successful
completion of this function.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiPool_release">
int <code class="descname">dpiPool_release</code><span class="sig-paren">(</span>dpiPool<em>&nbsp;*pool</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_release" title="Permalink to this definition">¶</a></dt>
<dd><p>Releases a reference to the pool. A count of the references to the pool is
maintained and when this count reaches zero, the memory associated with the
pool is freed and the session pool is closed if that has not already
taken place using the function <a class="reference internal" href="#c.dpiPool_close" title="dpiPool_close"><code class="xref c c-func docutils literal"><span class="pre">dpiPool_close()</span></code></a>.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>pool</strong> -- the pool from which a reference is to be released. If the
reference is NULL or invalid an error is returned.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiPool_setGetMode">
int <code class="descname">dpiPool_setGetMode</code><span class="sig-paren">(</span>dpiPool<em>&nbsp;*pool</em>, dpiPoolGetMode<em>&nbsp;value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_setGetMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the mode used for acquiring or getting connections from the pool.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>pool</strong> -- a reference to the pool in which the mode used for acquiring
connections is to be set. If the reference is NULL or invalid an error is
returned.</p>
<p><strong>value</strong> -- the value to set.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiPool_setMaxLifetimeSession">
int <code class="descname">dpiPool_setMaxLifetimeSession</code><span class="sig-paren">(</span>dpiPool<em>&nbsp;*pool</em>, uint32_t<em>&nbsp;value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_setMaxLifetimeSession" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the maximum lifetime of all sessions in the pool, in seconds.
Sessions in the pool are terminated when this value has been reached, but
only when another session is released back to the pool.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>pool</strong> -- a reference to the pool in which the maximum lifetime of
sessions is to be set. If the reference is NULL or invalid an error is
returned.</p>
<p><strong>value</strong> -- the value to set.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiPool_setStmtCacheSize">
int <code class="descname">dpiPool_setStmtCacheSize</code><span class="sig-paren">(</span>dpiPool<em>&nbsp;*pool</em>, uint32_t<em>&nbsp;cacheSize</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_setStmtCacheSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the default size of the statement cache for sessions in the pool.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>pool</strong> -- a reference to the pool in which the default size of the
statement cache is to be set. If the reference is NULL or invalid an error
is returned.</p>
<p><strong>cacheSize</strong> -- the new size of the statement cache, in number of
statements.</p>
</dd></dl>

<dl class="function">
<dt id="c.dpiPool_setTimeout">
int <code class="descname">dpiPool_setTimeout</code><span class="sig-paren">(</span>dpiPool<em>&nbsp;*pool</em>, uint32_t<em>&nbsp;value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiPool_setTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the amount of time, in seconds, after which idle sessions in the
pool are terminated, but only when another session is released back to the
pool.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>pool</strong> -- a reference to the pool in which the timeout for idle sessions
is to be set. If the reference is NULL or invalid an error is returned.</p>
<p><strong>value</strong> -- the value to set.</p>
</dd></dl>

</div>
 
          </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
      &#169; Copyright 2016, 2017 Oracle and/or its affiliates.  All rights reserved.
    </div>
  </body>
</html>
